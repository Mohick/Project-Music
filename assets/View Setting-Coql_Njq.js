import{b as u,r as x,j as s}from"./index-BW0mEvSb.js";class _{handlecollapsibleUpdate(){const a=document.getElementById("setting__btn--edit--account"),e=document.querySelector(".setting__box__title--username"),t=document.querySelector(".setting__box__edit--username"),r=document.querySelector(".setting__box__title--email"),i=document.querySelector(".setting__box__edit--email"),l=document.querySelector(".setting__box__title--password"),d=document.querySelector(".setting__box__edit--password"),c=document.getElementById("setting__show__btn--submit--edit");a.getAttribute("edit")?(a.removeAttribute("edit"),e.classList.remove("hidden"),e.classList.add("block"),t.classList.remove("block"),t.classList.add("hidden"),r.classList.remove("hidden"),r.classList.add("block"),i.classList.remove("block"),i.classList.add("hidden"),l.classList.remove("hidden"),l.classList.add("block"),d.classList.add("hidden"),d.classList.remove("block"),c.classList.remove("block"),c.classList.add("hidden")):(a.setAttribute("edit",!0),e.classList.remove("block"),e.classList.add("hidden"),t.classList.remove("hidden"),t.classList.add("block"),r.classList.remove("block"),r.classList.add("hidden"),i.classList.remove("hidden"),i.classList.add("block"),l.classList.add("hidden"),l.classList.remove("block"),d.classList.remove("hidden"),d.classList.add("block"),c.classList.remove("hidden"),c.classList.add("block"))}handleSubmit(a){Promise.resolve({}).then(e=>{const t=document.querySelector(".setting__box__edit--alert--username ");return(""+document.querySelector(".setting__box__edit--input--username").querySelector("input").value).trim().length>=6?(t.innerHTML="New username !",t.classList.add("text-green-400"),t.classList.remove("text-red-400"),t.classList.remove("text-white"),e.username=!0,e):(t.innerHTML="Your username great than 6  charater !",t.classList.add("text-red-400"),t.classList.remove("text-green-400"),t.classList.remove("text-white"),e.username=!1,e)}).then(e=>{const t=document.querySelector(".setting__box__edit--input--email").querySelector("input"),r=document.querySelector(".setting__box__edit--alert--password "),i=document.querySelector(".setting__box__edit--input--password").querySelector("input");return(""+i.value).trim().length>=8?(""+i.value).trim()==(""+t.value).trim()?(r.classList.add("text-red-400"),r.classList.remove("text-green-400"),r.classList.remove("text-white"),r.innerHTML="Your password must be different from your email ! ",e.password=!1,e):(r.innerHTML="New Password Or Current Password!",r.classList.add("text-green-400"),r.classList.remove("text-red-400"),r.classList.remove("text-white"),e.password=!0,e):(r.innerHTML="Your Password great than 8 charater!",r.classList.add("text-red-400"),r.classList.remove("text-green-400"),r.classList.remove("text-white"),e.password=!1,e)}).then(e=>{const t=document.querySelector(".setting__edit--current--password").value.trim(),r=document.querySelector(".setting__edit__title--current--password");return t!==a.password?(r.classList.add("text-red-400"),r.classList.remove("text-green-400"),r.classList.remove("text-white"),e.currentPassword=!1,e):(r.classList.remove("text-red-400"),r.classList.add("text-green-400"),r.classList.remove("text-white"),e.currentPassword=!0,e)}).then(e=>{const t=document.querySelector(".setting__box__edit--input--email").querySelector("input").value.trim(),r=document.querySelector(".setting__box__edit--alert--email ");/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)&&u.get(`https://api-best-music.onrender.com/account/client/checkbeforeupdate?id=${a._id}&email=${t}`).then(i=>{if(JSON.parse(i.data.email)){if(r.classList.remove("text-red-400"),r.classList.add("text-green-400"),r.innerHTML="Use Your Email ! ",console.log(e.username,e.password,e.currentPassword),e.username&&e.password&&e.currentPassword){const l=document.querySelector(".setting__box__edit--input--username").querySelector("input").value.trim(),d=document.querySelector(".setting__box__edit--input--password").querySelector("input").value.trim(),c={currentAccount:a,newAccount:{_id:a._id,username:l,email:t,password:d}};u.patch("https://api-best-music.onrender.com/account/client/crud/update",c,{withCredentials:!0,credentials:"include"}).then(m=>{console.log(m)})}}else r.innerHTML="your email has been use",r.classList.remove("text-green-400"),r.classList.add("text-red-400")})})}handleBlurEmail(a,e){const t=a.target.value.trim(),r=document.querySelector(".setting__box__edit--alert--email ");/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)&&u.get(`https://api-best-music.onrender.com/account/client/checkbeforeupdate?id=${e._id}&email=${t}`).then(i=>{JSON.parse(i.data.email)?(r.classList.remove("text-red-400"),r.classList.add("text-green-400"),r.innerHTML="Use Your Email ! "):(r.innerHTML="your email has been use",r.classList.remove("text-green-400"),r.classList.add("text-red-400"))})}handleBlurPassword(a){const e=document.querySelector(".setting__box__edit--input--email").querySelector("input"),t=document.querySelector(".setting__box__edit--alert--password "),r=document.querySelector(".setting__box__edit--input--password").querySelector("input");(""+r.value).trim().length>=8?(""+r.value).trim()==(""+e.value).trim()?(t.classList.add("text-red-400"),t.classList.remove("text-green-400"),t.classList.remove("text-white"),t.innerHTML="Your password must be different from your email ! "):(t.innerHTML="New Password !",t.classList.add("text-green-400"),t.classList.remove("text-red-400"),t.classList.remove("text-white")):(t.innerHTML="Your Password great than 8 charater!",t.classList.add("text-red-400"),t.classList.remove("text-green-400"),t.classList.remove("text-white"))}handleBlurUsername(a){const e=document.querySelector(".setting__box__edit--alert--username ");(""+document.querySelector(".setting__box__edit--input--username").querySelector("input").value).trim().length>=6?(e.innerHTML="New username !",e.classList.add("text-green-400"),e.classList.remove("text-red-400"),e.classList.remove("text-white")):(e.innerHTML="Your username great than 6  charater !",e.classList.add("text-red-400"),e.classList.remove("text-green-400"),e.classList.remove("text-white"))}currentPassword(a){const e=document.querySelector(".setting__edit--current--password").value.trim(),t=document.querySelector(".setting__edit__title--current--password");e!==a.password?(t.classList.add("text-red-400"),t.classList.remove("text-green-400"),t.classList.remove("text-white")):(t.classList.remove("text-red-400"),t.classList.add("text-green-400"),t.classList.remove("text-white"))}}const o=new _;function p(){const[n,a]=x.useState({});return x.useEffect(()=>{let e=!0;return e&&u.get("https://api-best-music.onrender.com/account/client/automatic/login/",{withCredentials:!0}).then(t=>{t.data._id||(window.location.pathname="error 404");const r=document.querySelector(".setting__box__title--password");document.querySelector(".setting__box__title--email");const i=t.data.password;if(i.length>0){const l=i.slice(0,2),d=i.slice(-2),c=i.slice(2,i.length-2),m="*".repeat(c.length);r.innerHTML=l+m+d}a(t.data)}),()=>e=!1},[]),s.jsx("div",{className:"container py-16  mb-28 text-white   m-auto",children:s.jsxs("div",{className:"border rounded-lg border-white p-4",children:[s.jsx("div",{className:"w-full text-center uppercase font-bold text-4xl",children:"Setting"}),s.jsxs("div",{children:[s.jsx("div",{className:"flex justify-end cursor-pointer items-center",children:s.jsx("div",{id:"setting__btn--edit--account",onClick:o.handlecollapsibleUpdate,className:" rounded-md text-1xl border border-white hover:bg-slate-800 p-2",children:"Edit"})}),s.jsxs("div",{className:"mt-3 flex flex-col gap-3",children:[s.jsxs("div",{className:"flex gap-2 ",children:[s.jsx("div",{className:"flex items-end setting__box__title w-20",children:s.jsx("div",{className:"capitalize",children:"Username:"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"truncate setting__box__title--username block",children:n.username}),s.jsxs("div",{className:"hidden w-full setting__box__edit--username",children:[s.jsx("div",{className:"flex overflow-hidden w-full justify-end",children:s.jsx("div",{className:"text-green-400 text-xs overflow-hidden text-end truncate w-full setting__box__edit--alert--username  capitalize",children:"Your username great than 6 charater !"})}),s.jsx("div",{className:"setting__box__edit--input--username",children:s.jsx("input",{onBlur:o.handleBlurUsername,type:"text",defaultValue:n.username,className:"px-1 w-full outline-none bg-transparent"})})]})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("div",{className:"flex items-end w-20",children:s.jsx("div",{className:"capitalize ",children:"Email:"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"truncate setting__box__title--email",children:n.email}),s.jsxs("div",{className:"hidden  setting__box__edit--email",children:[s.jsx("div",{className:"flex overflow-hidden w-full justify-end",children:s.jsx("div",{className:"text-green-400 text-xs text-end overflow-hidden truncate w-full setting__box__edit--alert--email  capitalize",children:"Use Your Email !"})}),s.jsx("div",{className:"setting__box__edit--input--email",children:s.jsx("input",{type:"text",onBlur:e=>{o.handleBlurEmail(e,n)},defaultValue:n.email,className:" w-full px-1 outline-none bg-transparent"})})]})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("div",{className:"flex items-end w-20",children:s.jsx("div",{className:"capitalize",children:"password :"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"truncate setting__box__title--password"}),s.jsxs("div",{className:"hidden  setting__box__edit--password ",children:[s.jsx("div",{className:"flex  w-full justify-end",children:s.jsx("div",{className:"text-white overflow-hidden around text-end text-xs truncate w-full setting__box__edit--alert--password capitalize",children:"New Password Or Current Password !"})}),s.jsx("div",{className:"setting__box__edit--input--password",children:s.jsx("input",{onBlur:e=>{o.handleBlurPassword(e)},type:"password",autoComplete:"off ",className:" w-full px-1 outline-none bg-transparent"})})]})]})]})]}),s.jsxs("div",{id:"setting__show__btn--submit--edit",className:"hidden ",children:[s.jsx("hr",{className:"my-9"}),s.jsx("div",{className:"my-3 flex flex-col justify-start items-end",children:s.jsxs("div",{children:[s.jsx("div",{className:"block setting__edit__title--current--password ",children:s.jsx("label",{htmlFor:"",children:"Password Current !"})}),s.jsx("div",{className:"block my-2 ",children:s.jsx("input",{className:"rounded block setting__edit--current--password  border px-1 bg-transparent  outline-none",type:"password",onBlur:e=>{o.currentPassword(n)}})})]})}),s.jsxs("div",{className:"flex w-full justify-end gap-2",children:[s.jsx("div",{onClick:o.handlecollapsibleUpdate,className:"p-2 shadow-lg cursor-pointer rounded hover:bg-gray-800 bg-gray-400",children:"Cannel"}),s.jsx("div",{onClick:()=>{o.handleSubmit(n)},className:"p-2 rounded cursor-pointer  hover:bg-green-800 bg-green-400",children:"Save"})]})]})]})]})})}export{p as default};
